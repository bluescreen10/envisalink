
<link rel="import" href="alarm-panel-display.html">
<!-- <link rel="import" href="alarm-panel-key.html"> -->

<polymer-element name="alarm-panel" attributes="message wideMode responsiveWidth" tabindex=0>
  <template>
    <style>
     :host {
        display: block;
        background-color: #eee;
        overflow: hidden;

        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;

        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
        -webkit-touch-callout: none;
        -webkit-font-smoothing: antialiased;
      }

      #output {
        width: 100%;
        height: 38%;
        z-index: 1;
      }

      #output.wide {
        box-shadow: 0 5px 4px rgba(0, 0, 0, 0.3);
      }

      #keypad {
        position: absolute;
        top: 38%;
        bottom: 0;
        width: 100%;
      }

      #resultInk {
        position: absolute;
        border-radius: 50%;
        background-color: #73daeb;
        -webkit-transform: translateZ(0) scale(0);
        transform: translateZ(0) scale(0);
      }

      #resultInk.error {
        background-color: #f50057;
      }

      #resultInk.spill {
        -webkit-transform: translateZ(0) scale(1);
        transform: translateZ(0) scale(1);
        -webkit-transition: -webkit-transform 0.38s ease-out;
        transition: transform 0.38s ease-out;
      }
    </style>

    <div id="resultInk" class="{{ {spill: message} | tokenList }}"></div>

    <alarm-panel-display id="output" class="{{ {wide: wideMatches || viewMode } | tokenList}}" message="hello"></alarm-panel-display>
  </template>

  <script>
    Polymer('alarm-panel', {
      viewMode: false
    });
    <!-- Polymer('alarm-panel', { -->
    <!--   domReady: function() { -->
    <!--     this.updateResultInk(); -->
    <!--     window.addEventListner('resize', this.updateResultInk.bind(this)); -->
    <!--   }, -->

    <!--   message: '', -->
    
    <!--   viewMode: false, -->

    <!--   responsiveWidth: '', -->

    <!--   updateResultInk: function() { -->
    <!--     var rect = this.getBoundingClientRect(); -->
    <!--     var keyRect = this.$.keypad.equalKey.getBoundingClientRect(); -->
    <!--     var s  = this.$.resultInk.style; -->
    <!--     var t = keyRect.top - rect.top + keyRect.height / 2; -->
    <!--     s.top = -t + 'px'; -->
    <!--     s.left = -t * 2 + (keyRect.left - rect.left + keyRect.width / 2) + 'px'; -->
    <!--     s.width = s.height = 4 * t + 'px'; -->
    <!--   }, -->
    
    <!-- }); -->
    
  </script>
  
</polymer-element>
